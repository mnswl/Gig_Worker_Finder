"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[217],{475:(e,a,n)=>{n.d(a,{Q:()=>r,s:()=>s});const t={AUD:"A$",CAD:"C$",LKR:"Rs.",USD:"$",INR:"\u20b9",EUR:"\u20ac",GBP:"\xa3"},r=e=>t[e]||e,s=function(e,a,n,t){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(!t||a===n)return e;if(r===n){const n=t[a];return n?e/n:e}const s=r===a?1:t[a],i=r===n?1:t[n];if(!s||!i)return e;return e/s*i}},7896:(e,a,n)=>{n.d(a,{H:()=>r});const t={Afghanistan:"AFN",Albania:"ALL",Algeria:"DZD",Andorra:"EUR",Angola:"AOA","Antigua and Barbuda":"XCD",Argentina:"ARS",Armenia:"AMD",Australia:"AUD",Austria:"EUR",Azerbaijan:"AZN",Bahamas:"BSD",Bahrain:"BHD",Bangladesh:"BDT",Barbados:"BBD",Belarus:"BYN",Belgium:"EUR",Belize:"BZD",Benin:"XOF",Bhutan:"BTN",Bolivia:"BOB","Bosnia and Herzegovina":"BAM",Botswana:"BWP",Brazil:"BRL",Brunei:"BND",Bulgaria:"BGN","Burkina Faso":"XOF",Burundi:"BIF","Cabo Verde":"CVE",Cambodia:"KHR",Cameroon:"XAF",Canada:"CAD","Central African Republic":"XAF",Chad:"XAF",Chile:"CLP",China:"CNY",Colombia:"COP",Comoros:"KMF",Congo:"XAF","Costa Rica":"CRC","C\xf4te d'Ivoire":"XOF",Croatia:"EUR",Cuba:"CUP",Cyprus:"EUR","Czech Republic":"CZK","Democratic Republic of the Congo":"CDF",Denmark:"DKK",Djibouti:"DJF",Dominica:"XCD","Dominican Republic":"DOP",Ecuador:"USD",Egypt:"EGP","El Salvador":"USD","Equatorial Guinea":"XAF",Eritrea:"ERN",Estonia:"EUR",Eswatini:"SZL",Ethiopia:"ETB",Fiji:"FJD",Finland:"EUR",France:"EUR",Gabon:"XAF",Gambia:"GMD",Georgia:"GEL",Germany:"EUR",Ghana:"GHS",Greece:"EUR",Grenada:"XCD",Guatemala:"GTQ",Guinea:"GNF","Guinea-Bissau":"XOF",Guyana:"GYD",Haiti:"HTG","Holy See":"EUR",Honduras:"HNL",Hungary:"HUF",Iceland:"ISK",India:"INR",Indonesia:"IDR",Iran:"IRR",Iraq:"IQD",Ireland:"EUR",Israel:"ILS",Italy:"EUR",Jamaica:"JMD",Japan:"JPY",Jordan:"JOD",Kazakhstan:"KZT",Kenya:"KES",Kiribati:"AUD",Kuwait:"KWD",Kyrgyzstan:"KGS",Laos:"LAK",Latvia:"EUR",Lebanon:"LBP",Lesotho:"LSL",Liberia:"LRD",Libya:"LYD",Liechtenstein:"CHF",Lithuania:"EUR",Luxembourg:"EUR",Madagascar:"MGA",Malawi:"MWK",Malaysia:"MYR",Maldives:"MVR",Mali:"XOF",Malta:"EUR","Marshall Islands":"USD",Mauritania:"MRU",Mauritius:"MUR",Mexico:"MXN",Micronesia:"USD",Moldova:"MDL",Monaco:"EUR",Mongolia:"MNT",Montenegro:"EUR",Morocco:"MAD",Mozambique:"MZN",Myanmar:"MMK",Namibia:"NAD",Nauru:"AUD",Nepal:"NPR",Netherlands:"EUR","New Zealand":"NZD",Nicaragua:"NIO",Niger:"XOF",Nigeria:"NGN","North Korea":"KPW","North Macedonia":"MKD",Norway:"NOK",Oman:"OMR",Pakistan:"PKR",Palau:"USD",Palestine:"ILS",Panama:"PAB","Papua New Guinea":"PGK",Paraguay:"PYG",Peru:"PEN",Philippines:"PHP",Poland:"PLN",Portugal:"EUR",Qatar:"QAR",Romania:"RON",Russia:"RUB",Rwanda:"RWF","Saint Kitts and Nevis":"XCD","Saint Lucia":"XCD","Saint Vincent and the Grenadines":"XCD",Samoa:"WST","San Marino":"EUR","Sao Tome and Principe":"STN","Saudi Arabia":"SAR",Senegal:"XOF",Serbia:"RSD",Seychelles:"SCR","Sierra Leone":"SLL",Singapore:"SGD",Slovakia:"EUR",Slovenia:"EUR","Solomon Islands":"SBD",Somalia:"SOS","South Africa":"ZAR","South Korea":"KRW","South Sudan":"SSP",Spain:"EUR","Sri Lanka":"LKR",Sudan:"SDG",Suriname:"SRD",Sweden:"SEK",Switzerland:"CHF",Syria:"SYP",Tajikistan:"TJS",Tanzania:"TZS",Thailand:"THB","Timor-Leste":"USD",Togo:"XOF",Tonga:"TOP","Trinidad and Tobago":"TTD",Tunisia:"TND",Turkey:"TRY",Turkmenistan:"TMT",Tuvalu:"AUD",Uganda:"UGX",Ukraine:"UAH","United Arab Emirates":"AED","United Kingdom":"GBP","United States":"USD",Uruguay:"UYU",Uzbekistan:"UZS",Vanuatu:"VUV",Venezuela:"VES",Vietnam:"VND",Yemen:"YER",Zambia:"ZMW",Zimbabwe:"ZWL"},r=e=>t[e]},8971:(e,a,n)=>{n.d(a,{X:()=>t,q:()=>r});const t=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","C\xf4te d'Ivoire","Croatia","Cuba","Cyprus","Czech Republic","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Holy See","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],r=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","FOK","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KID","KMF","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STN","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TVD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VES","VND","VUV","WST","XAF","XCD","XOF","XPF","YER","ZAR","ZMW","ZWL"]},9e3:(e,a,n)=>{function t(e){return"worker"===e?"Freelancer":"employer"===e?"Client":(null===e||void 0===e?void 0:e.charAt(0).toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))}n.d(a,{A:()=>t})},9217:(e,a,n)=>{n.r(a),n.d(a,{default:()=>b});var t=n(5043),r=n(3216),s=n(4117),i=n(9442),l=n(1562),o=n(2115),c=n(8971),d=n(475),m=n(9e3),u=n(7896),h=n(3536),g=n.n(h),p=n(579);const b=function(){const e=(0,r.Zp)(),[a,n]=(0,t.useState)(null),[h,b]=(0,t.useState)("jobs"),[y,N]=(0,t.useState)([]),[v,S]=(0,t.useState)([]),[j,x]=(0,t.useState)([]),[f,C]=(0,t.useState)([]),[D,R]=(0,t.useState)(!1),[A,k]=(0,t.useState)(""),[M,U]=(0,t.useState)(!1),[B,E]=(0,t.useState)(()=>"true"===localStorage.getItem("pendingPhoneVerify")),[I,P]=(0,t.useState)(""),[L,T]=(0,t.useState)(()=>"true"===localStorage.getItem("pendingEmailVerify")),[G,w]=(0,t.useState)(""),[K,F]=(0,t.useState)(!1),[V,_]=(0,t.useState)(!1),[O,H]=(0,t.useState)(null),{t:Z}=(0,s.Bd)(),[X,$]=(0,t.useState)({username:"",firstName:"",lastName:"",email:"",phone:""}),Y=(0,t.useRef)(null),z=(0,t.useRef)(null),[W,J]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{const{data:e}=await i.A.get("/auth/me");let t=e.id||e._id;const l=localStorage.getItem("pendingCountry"),o=localStorage.getItem("pendingCurrency"),c=e.country||localStorage.getItem(`country_${t}`)||l||"",d=e.currency||localStorage.getItem(`currency_${t}`)||o||"",m=e.avatar||localStorage.getItem(`avatar_${t}`)||"";if(n({...e,country:c,currency:d,avatar:m}),c&&localStorage.setItem(`country_${t}`,c),d&&localStorage.setItem(`currency_${t}`,d),m&&localStorage.setItem(`avatar_${t}`,m),!e.country&&l||!e.currency&&o)try{const e=await i.A.patch("/auth/me",{country:l,currency:o}),a=e.data.country||l,t=e.data.currency||o;n(e=>({...e,country:a,currency:t})),$(e=>({...e,country:a,currency:t})),localStorage.removeItem("pendingCountry"),localStorage.removeItem("pendingCurrency")}catch(r){console.error(r)}"worker"!==e.role&&"employer"!==e.role&&b("notifications"),localStorage.setItem("uid",e.id||e._id);const u={...e,country:c,currency:d,avatar:m};g().isEqual(a,u)||n(u);const h={username:e.username||"",firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phone:e.phone||"",country:c,currency:d};if(g().isEqual(X,h)||$(h),"employer"===e.role){const e=await i.A.get("/jobs/me");N(e.data)}else{const a=(await i.A.get("/jobs")).data.filter(a=>a.applicants&&a.applicants.some(a=>{var n;return((null===(n=a.user)||void 0===n?void 0:n._id)||("object"===typeof a.user&&a.user.toString?a.user.toString():a.user))===(e.id||e._id)}));N(a)}S([{_id:1,text:"Welcome to Gig Worker Finder!"}]);const p=await i.A.get("/chat");x(p.data);try{const e=await i.A.get("/users/me/bookmarks");C(e.data||[])}catch(s){console.error(s)}}catch(r){var t;401===(null===(t=r.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),e("/login")),console.error(r)}})(),(0,l.c)(),l.s.off("applicationStatus"),l.s.off("jobApplied"),l.s.on("applicationStatus",e=>{let{jobId:a,jobTitle:n,status:t,message:r}=e;const s=localStorage.getItem("uid");S(e=>[...e,{_id:Date.now().toString(),text:`Your application for "${n}" is now ${t}`}]),o.oR.info(`Application "${n}" ${t}`),N(e=>e.map(e=>{if(e._id===a){const a=e.applicants.map(e=>{var a;return((null===(a=e.user)||void 0===a?void 0:a._id)||("object"===typeof e.user&&e.user.toString?e.user.toString():e.user))===s?{...e,status:t,responseMessage:r}:e});return{...e,applicants:a}}return e}))}),l.s.on("jobApplied",e=>{let{job:a}=e;const n=localStorage.getItem("uid");a.applicants&&a.applicants.some(e=>{var a;return((null===(a=e.user)||void 0===a?void 0:a._id)||("object"===typeof e.user&&e.user.toString?e.user.toString():e.user))===n})&&N(e=>e.some(e=>e._id===a._id)?e:[...e,a])})},[]),(0,t.useEffect)(()=>{"messages"===h&&(async()=>{try{const e=await i.A.get("/chat");x(e.data)}catch(e){console.error(e)}})()},[h]),(0,t.useEffect)(()=>{localStorage.getItem("token")||e("/login",{replace:!0})},[e]);const q=Array.from({length:70},(e,a)=>`https://i.pravatar.cc/140?img=${a+1}`);return localStorage.getItem("token")?a?(0,p.jsxs)("div",{className:"container mt-4",style:{maxWidth:"900px"},children:[B&&(0,p.jsx)("div",{className:"modal d-block",tabIndex:"-1",style:{background:"rgba(0,0,0,0.5)"},children:(0,p.jsx)("div",{className:"modal-dialog",children:(0,p.jsxs)("div",{className:"modal-content",children:[(0,p.jsxs)("div",{className:"modal-header",children:[(0,p.jsx)("h5",{className:"modal-title",children:"Verify Phone"}),(0,p.jsx)("button",{type:"button",className:"btn-close",onClick:()=>{E(!1),localStorage.removeItem("pendingPhoneVerify"),P("")}})]}),(0,p.jsxs)("div",{className:"modal-body",children:[(0,p.jsxs)("p",{children:["Enter the 6-digit code sent to ",a.phone]}),(0,p.jsx)("input",{className:"form-control",value:I,maxLength:6,onChange:e=>{/^[0-9]*$/.test(e.target.value)&&P(e.target.value)}})]}),(0,p.jsxs)("div",{className:"modal-footer",children:[(0,p.jsx)("button",{className:"btn btn-secondary",onClick:()=>{E(!1),localStorage.removeItem("pendingPhoneVerify"),P("")},children:"Cancel"}),(0,p.jsx)("button",{className:"btn btn-primary",disabled:6!==I.length,onClick:async()=>{try{await i.A.post("/auth/verify-phone",{phone:a.phone,code:I}),n(e=>({...e,phoneVerified:!0})),E(!1),localStorage.setItem("pendingPhoneVerify","false"),alert("Phone verified successfully!")}catch(r){var e,t;alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.msg)||"Invalid code")}},children:"Verify"})]})]})})}),L&&(0,p.jsx)("div",{className:"modal d-block",tabIndex:"-1",style:{background:"rgba(0,0,0,0.5)"},children:(0,p.jsx)("div",{className:"modal-dialog",children:(0,p.jsxs)("div",{className:"modal-content",children:[(0,p.jsxs)("div",{className:"modal-header",children:[(0,p.jsx)("h5",{className:"modal-title",children:"Verify Email"}),(0,p.jsx)("button",{type:"button",className:"btn-close",onClick:()=>{T(!1),localStorage.removeItem("pendingEmailVerify"),w("")}})]}),(0,p.jsxs)("div",{className:"modal-body",children:[(0,p.jsxs)("p",{children:["Enter the 6-digit code sent to ",a.email]}),(0,p.jsx)("input",{className:"form-control",value:G,maxLength:6,onChange:e=>{/^[0-9]*$/.test(e.target.value)&&w(e.target.value)}})]}),(0,p.jsxs)("div",{className:"modal-footer",children:[(0,p.jsx)("button",{className:"btn btn-secondary",onClick:()=>{T(!1),localStorage.removeItem("pendingEmailVerify"),w("")},children:"Cancel"}),(0,p.jsx)("button",{className:"btn btn-primary",disabled:6!==G.length,onClick:async()=>{try{await i.A.post("/auth/verify-email",{email:a.email,code:G}),n(e=>({...e,emailVerified:!0})),T(!1),localStorage.setItem("pendingEmailVerify","false"),alert("Email verified successfully!")}catch(r){var e,t;alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.msg)||"Invalid code")}},children:"Verify"})]})]})})}),W&&(0,p.jsx)("div",{className:"modal d-block",tabIndex:"-1",style:{background:"rgba(0,0,0,0.5)"},children:(0,p.jsx)("div",{className:"modal-dialog modal-dialog-scrollable",children:(0,p.jsxs)("div",{className:"modal-content",children:[(0,p.jsxs)("div",{className:"modal-header",children:[(0,p.jsx)("h5",{className:"modal-title",children:"Choose Avatar"}),(0,p.jsx)("button",{type:"button",className:"btn-close",onClick:()=>J(!1)})]}),(0,p.jsxs)("div",{className:"modal-body",children:[(0,p.jsx)("div",{className:"d-flex flex-wrap gap-2",children:q.map(e=>(0,p.jsx)("img",{src:e,alt:"tpl",className:"rounded-circle",style:{width:80,height:80,cursor:"pointer",objectFit:"cover"},onClick:()=>(async e=>{const a=localStorage.getItem("uid");a&&localStorage.setItem(`avatar_${a}`,e),n(a=>({...a,avatar:e})),J(!1);try{await i.A.post("/auth/avatar",{url:e})}catch(t){console.error(t)}})(e),onError:e=>{e.currentTarget.style.display="none"}},e))}),(0,p.jsx)("hr",{}),(0,p.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,p.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>{var e;J(!1),null===(e=Y.current)||void 0===e||e.click()},children:"Upload Custom Image"}),(0,p.jsx)("button",{className:"btn btn-secondary",onClick:()=>J(!1),children:"Cancel"})]})]})]})})}),(0,p.jsxs)("div",{className:"profile-header","data-aos":"fade-up",children:[(0,p.jsx)("img",{src:a.avatar||`https://i.pravatar.cc/140?u=${a.email}`,alt:"avatar",className:"profile-avatar",onClick:()=>J(!0),title:"Click to change avatar"}),(0,p.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const a=e.target.files[0];if(!a)return;const t=URL.createObjectURL(a);n(e=>({...e,avatar:t}));const r=localStorage.getItem("uid");r&&localStorage.setItem(`avatar_${r}`,t);try{const e=new FormData;e.append("avatar",a);const t=await i.A.post("/auth/avatar",e);n(t.data)}catch(s){console.error(s)}},ref:Y,style:{display:"none"}}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{children:a.username||a.name}),(0,p.jsxs)("p",{className:"text-muted mb-1",children:[a.email," ",a.emailVerified?(0,p.jsx)("span",{className:"badge bg-success",children:"Verified"}):(0,p.jsx)("span",{className:"badge bg-warning text-dark",children:"Unverified"}),!a.emailVerified&&(0,p.jsx)("button",{className:"btn btn-sm btn-outline-primary ms-2",onClick:async()=>{try{await i.A.post("/auth/email-code",{email:a.email}),localStorage.setItem("pendingEmailVerify","true"),w(""),T(!0)}catch(t){var e,n;alert((null===(e=t.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.msg)||"Verification failed")}},children:"Verify"})]}),(0,p.jsxs)("p",{className:"mb-1",children:["Phone: ",a.phone," ",a.phoneVerified?(0,p.jsx)("span",{className:"badge bg-success",children:"Verified"}):(0,p.jsx)("span",{className:"badge bg-warning text-dark",children:"Unverified"}),!a.phoneVerified&&(0,p.jsx)("button",{className:"btn btn-sm btn-outline-primary ms-2",disabled:K,onClick:async()=>{try{F(!0),await i.A.post("/auth/phone-code",{phone:a.phone}),localStorage.setItem("pendingPhoneVerify","true"),E(!0)}catch(t){var e,n;alert((null===(e=t.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.msg)||"Failed to send code")}finally{F(!1)}},children:"Verify phone"})]}),(0,p.jsx)("span",{className:"badge bg-primary text-uppercase",children:(0,m.A)(a.role)}),(0,p.jsx)("span",{className:"badge bg-secondary ms-2",children:a.country||X.country}),(0,p.jsx)("span",{className:"badge bg-secondary ms-2",children:a.currency||X.currency}),(0,p.jsx)("button",{className:"btn btn-sm btn-outline-secondary ms-2",onClick:()=>{M||$({username:a.username||"",firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",country:a.country||localStorage.getItem(`country_${a._id||a.id}`)||"",currency:a.currency||localStorage.getItem(`currency_${a._id||a.id}`)||(0,u.H)(a.country)||""}),U(e=>!e)},children:M?"Cancel":"Edit"})]})]}),M&&(0,p.jsxs)("form",{className:"mt-3",onSubmit:async e=>{e.preventDefault();try{const e={};if(Object.keys(X).forEach(n=>{X[n]!==(a[n]||"")&&(e[n]=X[n])}),0===Object.keys(e).length)return void U(!1);const t=await i.A.patch("/auth/me",e),r={...a,...t.data,country:X.country,currency:X.currency},s=t.data._id||t.data.id;s&&(localStorage.setItem(`country_${s}`,X.country),localStorage.setItem(`currency_${s}`,X.currency)),n(r),U(!1)}catch(t){console.error(t)}},children:[(0,p.jsxs)("div",{className:"row g-3",children:[(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("label",{className:"form-label",children:"Username"}),(0,p.jsx)("input",{className:"form-control",value:X.username,onChange:e=>$({...X,username:e.target.value}),required:!0})]}),(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("label",{className:"form-label",children:"Email"}),(0,p.jsx)("input",{type:"email",className:"form-control",value:X.email,onChange:e=>$({...X,email:e.target.value}),required:!0})]}),(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("label",{className:"form-label",children:"First name"}),(0,p.jsx)("input",{className:"form-control",value:X.firstName,onChange:e=>$({...X,firstName:e.target.value}),required:!0})]}),(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("label",{className:"form-label",children:"Last name"}),(0,p.jsx)("input",{className:"form-control",value:X.lastName,onChange:e=>$({...X,lastName:e.target.value}),required:!0})]}),(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("label",{className:"form-label",children:"Phone"}),(0,p.jsx)("input",{className:"form-control",type:"tel",pattern:"^\\+?[0-9]{7,15}$",value:X.phone,onChange:e=>{const a=e.target.value;/^\+?[0-9]*$/.test(a)&&$({...X,phone:a})}})]}),(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("label",{className:"form-label",children:"Country"}),(0,p.jsxs)("select",{className:"form-select",value:X.country,onChange:e=>{const a=e.target.value,n=(0,u.H)(a);$(e=>({...e,country:a,currency:n||e.currency}))},required:!0,children:[(0,p.jsx)("option",{value:"",disabled:!0,children:"Select Country"}),!c.X.includes(X.country)&&X.country&&(0,p.jsx)("option",{value:X.country,children:X.country}),c.X.map(e=>(0,p.jsx)("option",{value:e,children:e},e))]})]}),(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("label",{className:"form-label",children:"Currency"}),(0,p.jsxs)("select",{className:"form-select",value:X.currency,onChange:e=>$({...X,currency:e.target.value}),required:!0,children:[(0,p.jsx)("option",{value:"",disabled:!0,children:"Select Currency"}),!c.q.includes(X.currency)&&X.currency&&(0,p.jsx)("option",{value:X.currency,children:X.currency}),c.q.map(e=>(0,p.jsx)("option",{value:e,children:`${(0,d.Q)(e)} ${e}`},e))]})]})]}),(0,p.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Save"})]}),"worker"===a.role&&(0,p.jsxs)("div",{className:"my-3",children:[(0,p.jsx)("h5",{children:"R\xe9sum\xe9 / CV"}),a.resume?(0,p.jsx)("p",{children:(()=>{const e=a.resume.startsWith("http")?a.resume:i.A.defaults.baseURL.replace(/\/api$/,"")+a.resume;return(0,p.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"me-2",children:"View current r\xe9sum\xe9"})})()}):(0,p.jsx)("p",{className:"text-muted",children:"No r\xe9sum\xe9 uploaded."}),(0,p.jsx)("button",{className:"btn btn-outline-primary",disabled:V,onClick:()=>{var e;return null===(e=z.current)||void 0===e?void 0:e.click()},children:a.resume?"Replace r\xe9sum\xe9":"Upload r\xe9sum\xe9"}),V&&(0,p.jsx)("span",{className:"ms-2 spinner-border spinner-border-sm"}),(0,p.jsx)("input",{type:"file",accept:".pdf,.doc,.docx",ref:z,style:{display:"none"},onChange:async e=>{const a=e.target.files[0];if(!a)return;const t=new FormData;t.append("resume",a);try{_(!0);const e=await i.A.post("/users/me/resume",t,{headers:{"Content-Type":"multipart/form-data"}});n(a=>({...a,resume:e.data.resume})),o.oR.success("R\xe9sum\xe9 uploaded")}catch(l){var r,s;o.oR.error((null===(r=l.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.msg)||"Failed to upload")}finally{_(!1),e.target.value=""}}})]}),(0,p.jsxs)("ul",{className:"nav profile-tabs mb-3",children:[("worker"===a.role||"employer"===a.role)&&(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)("button",{className:"nav-link "+("jobs"===h?"active":""),onClick:()=>b("jobs"),children:"employer"===a.role?Z("myPosts"):Z("appliedJobs")})}),(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)("button",{className:"nav-link "+("bookmarks"===h?"active":""),onClick:()=>b("bookmarks"),children:"Bookmarked"})}),(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)("button",{className:"nav-link "+("notifications"===h?"active":""),onClick:()=>b("notifications"),children:Z("notificationsTab")})}),(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)("button",{className:"nav-link "+("messages"===h?"active":""),onClick:()=>b("messages"),children:Z("messagesTab")})})]}),"jobs"===h&&("worker"===a.role||"employer"===a.role)&&(0,p.jsxs)("div",{children:[y.map(e=>(0,p.jsxs)("div",{className:"job-card d-flex justify-content-between align-items-start flex-column flex-md-row",children:[(0,p.jsxs)("div",{children:[(n=>{const t=a.id||a._id,r=null===(n=e.applicants)||void 0===n?void 0:n.find(e=>{var a;return((null===(a=e.user)||void 0===a?void 0:a._id)||("object"===typeof e.user&&e.user.toString?e.user.toString():e.user))===t}),s=(null===r||void 0===r?void 0:r.status)||"pending",i="accepted"===s?"success":"rejected"===s?"danger":"secondary",l="bookmarked"===s?"pending":s;return(0,p.jsxs)("h5",{children:[e.title," ",(0,p.jsx)("span",{className:`badge bg-${i} ms-2 text-capitalize`,children:l})]})})(),(0,p.jsxs)("p",{className:"mb-1",children:[e.location," \u2022 ",e.type]}),(0,p.jsx)("small",{className:"text-muted",children:new Date(e.createdAt).toLocaleDateString()})]}),"worker"===a.role&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{className:"btn btn-sm btn-outline-danger mt-2 mt-md-0",onClick:async()=>{try{await i.A.post(`/jobs/${e._id}/unapply`),N(a=>a.filter(a=>a._id!==e._id))}catch(a){console.error(a)}},children:Z("unapply")}),(0,p.jsx)("button",{className:"btn btn-sm btn-outline-primary mt-2 mt-md-0 ms-md-2",onClick:async()=>{const a=prompt("Subject for message");if(null===a)return;const n=prompt("Message body");if(!n)return;const t=e.employer?e.employer._id||e.employer.id||e.employer:null;if(t)try{const r=await i.A.post("/chat",{receiverId:t,subject:a,content:n,jobId:e._id});x(e=>[...e,r.data])}catch(r){console.error(r)}else alert("Cannot determine client to message")},children:"Message"})]})]},e._id)),0===y.length&&(0,p.jsx)("p",{children:"No jobs yet."})]}),"bookmarks"===h&&(0,p.jsxs)("div",{children:[f.map(e=>(0,p.jsxs)("div",{className:"job-card d-flex justify-content-between align-items-start flex-column flex-md-row",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h5",{children:e.title}),(0,p.jsxs)("p",{className:"mb-1",children:[e.location," \u2022 ",e.type]}),(0,p.jsx)("small",{className:"text-muted",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,p.jsx)("button",{className:"btn btn-sm btn-outline-danger mt-2 mt-md-0",onClick:async()=>{try{await i.A.delete(`/users/me/bookmarks/${e._id}`),C(a=>a.filter(a=>a._id!==e._id))}catch(a){console.error(a)}},children:"Remove"})]},e._id)),0===f.length&&(0,p.jsx)("p",{children:"No bookmarks."})]}),"notifications"===h&&(0,p.jsxs)("div",{children:[v.map(e=>(0,p.jsx)("div",{className:"notification-item",children:e.text},e._id)),0===v.length&&(0,p.jsx)("p",{children:"No notifications."})]}),"messages"===h&&(0,p.jsxs)("div",{children:[j.map(e=>{const n=e.sender?a&&e.sender._id===a.id?"Me":e.sender.name:"Unknown",t=e.receiver?a&&e.receiver._id===a.id?"Me":e.receiver.name:"Unknown";return(0,p.jsxs)("div",{className:"message-item",children:[(0,p.jsxs)("strong",{children:[n," \u2192 ",t,": "]}),e.content]},e._id)}),0===j.length&&(0,p.jsx)("p",{children:"No messages."})]}),(0,p.jsx)("hr",{className:"my-4"}),(0,p.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>R(!0),children:Z("deleteMyAccount")}),D&&(0,p.jsxs)("div",{className:"card card-body mt-3",children:[(0,p.jsx)("h5",{children:Z("deleteTitle")}),(0,p.jsx)("p",{className:"small text-muted",children:Z("deleteDescription")}),(0,p.jsx)("p",{className:"small",children:Z("deleteConfirmInfo")}),(0,p.jsx)("input",{className:"form-control mb-3",value:A,onChange:e=>k(e.target.value),placeholder:"Type here"}),(0,p.jsx)("button",{className:"btn btn-danger",disabled:"DELETE MY ACCOUNT"!==A,onClick:async()=>{try{await i.A.delete("/auth/me"),localStorage.removeItem("token"),localStorage.removeItem("role");try{l.s.disconnect()}catch(n){}window.location.href="/register"}catch(t){var e,a;console.error(t),alert((null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.msg)||"Failed")}},children:Z("confirmDelete")}),(0,p.jsx)("button",{className:"btn btn-secondary ms-2",onClick:()=>{R(!1),k("")},children:Z("cancelBtn")})]})]}):(0,p.jsx)("p",{className:"container mt-4",children:"Loading profile..."}):null}}}]);
//# sourceMappingURL=217.80d98232.chunk.js.map