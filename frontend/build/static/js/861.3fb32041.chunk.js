"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[861],{475:(a,e,n)=>{n.d(e,{Q:()=>t,s:()=>r});const i={AUD:"A$",CAD:"C$",LKR:"Rs.",USD:"$",INR:"\u20b9",EUR:"\u20ac",GBP:"\xa3"},t=a=>i[a]||a,r=function(a,e,n,i){let t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(!i||e===n)return a;if(t===n){const n=i[e];return n?a/n:a}const r=t===e?1:i[e],o=t===n?1:i[n];if(!r||!o)return a;return a/r*o}},5861:(a,e,n)=>{n.r(e),n.d(e,{default:()=>m});var i=n(5043),t=n(579);function r(a){let{value:e="",onChange:n,disabled:r=!1}=a;const o=(0,i.useRef)([]),s=a=>{if(r)return;const e=a.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);e&&(a.preventDefault(),n(e),setTimeout(()=>{var a;e.split("").forEach((a,e)=>{o.current[e]&&(o.current[e].value=a)});const n=e.length>=6?5:e.length;null===(a=o.current[n])||void 0===a||a.focus()}))};return(0,t.jsx)("div",{className:"d-flex gap-2 justify-content-center",children:Array.from({length:6}).map((a,i)=>(0,t.jsx)("input",{disabled:r,type:"text",inputMode:"numeric",maxLength:1,className:"form-control text-center otp-box "+(r?"disabled":""),style:{width:"48px",height:"48px",fontSize:"1.25rem"},value:e[i]||"",onChange:a=>((a,i)=>{if(r)return;const t=i.target.value.replace(/\D/g,"").slice(-1),s=e.split("");s[a]=t;const l=s.join("").slice(0,6);var c;n(l),t&&a<5&&(null===(c=o.current[a+1])||void 0===c||c.focus())})(i,a),onKeyDown:a=>((a,n)=>{var i;if(!r)if("Backspace"===n.key&&!e[a]&&a>0)null===(i=o.current[a-1])||void 0===i||i.focus();else if("ArrowLeft"===n.key&&a>0){var t;null===(t=o.current[a-1])||void 0===t||t.focus()}else if("ArrowRight"===n.key&&a<5){var s;null===(s=o.current[a+1])||void 0===s||s.focus()}})(i,a),onPaste:s,ref:a=>o.current[i]=a},i))})}var o=n(3216),s=n(5475),l=n(9442),c=n(8971),d=n(475),u=n(7896);const m=function(){const a=(0,o.zy)(),e=(0,o.Zp)(),{email:n,phone:m,autoEmail:S,skipProfile:h}=a.state||{},[g,b]=(0,i.useState)(""),[y,v]=(0,i.useState)(""),[D,N]=(0,i.useState)(!!S),[R,f]=(0,i.useState)(!1),[p,C]=(0,i.useState)(S?"We have sent a verification code to your email.":""),[A,M]=(0,i.useState)(!1),[B,P]=(0,i.useState)(!1),[E,U]=(0,i.useState)({username:"",country:"",currency:""}),[L,G]=(0,i.useState)(!!h);(0,i.useEffect)(()=>{(async()=>{try{const a=await l.A.get("/auth/me"),e={username:a.data.username||"",country:a.data.country||"",currency:a.data.currency||""};U(e),e.username&&e.country&&e.currency&&G(!0)}catch(a){console.error(a)}})()},[]),(0,i.useEffect)(()=>{const a=a=>{"Enter"===a.key&&"TEXTAREA"!==document.activeElement.tagName&&(a.preventDefault(),6!==g.length||A?6!==y.length||!R||B?!A||!L||m&&!B||createAccount():K():T())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[g,A,y,R,B,L]);const T=async()=>{try{await l.A.post("/auth/verify-email",{email:n,code:g}),M(!0),C("Email verified successfully")}catch(i){var a,e;alert((null===(a=i.response)||void 0===a||null===(e=a.data)||void 0===e?void 0:e.msg)||"Verification failed")}},K=async()=>{try{await l.A.post("/auth/verify-phone",{phone:m,code:y}),P(!0),C("Phone verified successfully")}catch(n){var a,e;alert((null===(a=n.response)||void 0===a||null===(e=a.data)||void 0===e?void 0:e.msg)||"Verification failed")}};return n||m?(0,t.jsxs)("div",{className:"container py-5",style:{maxWidth:500},"data-aos":"fade-up",children:[(0,t.jsx)("h2",{className:"mb-3",children:"Verify Your Contact Information"}),(0,t.jsxs)("p",{className:"text-muted",children:["You need to verify at least ",(0,t.jsx)("strong",{children:"one"})," contact method before using the platform. Verifying both is recommended."]}),p&&(0,t.jsx)("div",{className:"alert alert-danger",children:p}),n&&(0,t.jsxs)("div",{className:"card card-body mb-4",children:[(0,t.jsx)("h5",{children:"Email Verification"}),(0,t.jsx)("p",{children:D?"We have sent a 6-digit code to your email.":"Send a verification code to your email."}),(0,t.jsxs)("div",{className:"input-group mb-2",children:[(0,t.jsx)(r,{value:g,onChange:b,disabled:!D}),(0,t.jsx)("button",{className:"btn btn-outline-secondary",onClick:async()=>{if(n)try{await l.A.post("/auth/email-code",{email:n}),N(!0)}catch(i){var a,e;console.error(i),C((null===(a=i.response)||void 0===a||null===(e=a.data)||void 0===e?void 0:e.msg)||"Failed to send email code")}},children:D?"Resend":"Send Code"})]}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:T,disabled:6!==g.length,children:"Verify Email"}),A&&(0,t.jsx)("span",{className:"badge bg-success ms-2",children:"Verified"})]}),m&&(0,t.jsxs)("div",{className:"card card-body mb-4",children:[(0,t.jsx)("h5",{children:"Phone Verification"}),(0,t.jsx)("p",{children:R?"We have sent a 6-digit code via SMS.":"Send a verification code to your phone."}),(0,t.jsxs)("div",{className:"input-group mb-2",children:[(0,t.jsx)(r,{value:y,onChange:v,disabled:!R}),(0,t.jsx)("button",{className:"btn btn-outline-secondary",onClick:async()=>{if(m)try{await l.A.post("/auth/phone-code",{phone:m}),f(!0)}catch(n){var a,e;console.error(n),C((null===(a=n.response)||void 0===a||null===(e=a.data)||void 0===e?void 0:e.msg)||"Failed to send phone code")}},children:R?"Resend":"Send Code"})]}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:K,disabled:6!==y.length,children:"Verify Phone"}),B&&(0,t.jsx)("span",{className:"badge bg-success ms-2",children:"Verified"})]}),!L&&(0,t.jsxs)("div",{className:"card card-body mb-4",children:[(0,t.jsx)("h5",{children:"Profile Information"}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Username"}),(0,t.jsx)("input",{type:"text",className:"form-control",value:E.username,onChange:a=>U({...E,username:a.target.value})})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Country"}),(0,t.jsxs)("select",{className:"form-select",value:E.country,onChange:a=>{const e=a.target.value,n=(0,u.H)(e);U(a=>({...a,country:e,currency:n||a.currency}))},required:!0,children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Select Country"}),c.X.map(a=>(0,t.jsx)("option",{value:a,children:a},a))]})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Currency"}),(0,t.jsxs)("select",{className:"form-select",value:E.currency,onChange:a=>U({...E,currency:a.target.value}),required:!0,children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Select Currency"}),c.q.map(a=>(0,t.jsx)("option",{value:a,children:`${(0,d.Q)(a)} ${a}`},a))]})]}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(E.username&&E.country&&E.currency)try{await l.A.patch("/auth/me",E),G(!0),C("Profile saved")}catch(n){var a,e;alert((null===(a=n.response)||void 0===a||null===(e=a.data)||void 0===e?void 0:e.msg)||"Failed to save profile")}else alert("Please fill all required fields")},children:"Save Profile"})]}),(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4",children:[(0,t.jsx)("p",{className:"mb-0",children:"If you\u2019ve already verified, you can"}),(0,t.jsx)(s.N_,{to:"/login",children:"login here"})]}),(0,t.jsxs)("div",{className:"d-flex gap-2 mt-3",children:[(0,t.jsx)("button",{className:"btn btn-outline-secondary",onClick:async()=>{try{await l.A.delete("/auth/cancel"),localStorage.removeItem("token"),localStorage.removeItem("role"),e("/register")}catch(a){console.error(a),C("Failed to cancel registration. Please try again.")}},children:"Back & Edit Details"}),(S||h&&n&&!m)&&(0,t.jsx)("button",{className:"btn btn-success",onClick:()=>{if(!A||!L||m&&!B)return void alert("Please complete verification and save profile");const a=sessionStorage.getItem("token"),n=sessionStorage.getItem("role");a&&(localStorage.setItem("token",a),n&&localStorage.setItem("role",n),sessionStorage.removeItem("token"),sessionStorage.removeItem("role")),sessionStorage.removeItem("draftRegistration"),e("/twofactor")},disabled:S?!(A&&L&&(!m||B)):!A,children:"Proceed to Two-Factor Setup"}),h&&(n&&m||!n&&m)&&(0,t.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(!A&&!B)return void alert("Please verify at least one contact method");const a=sessionStorage.getItem("token"),n=sessionStorage.getItem("role");a&&(localStorage.setItem("token",a),n&&localStorage.setItem("role",n),sessionStorage.removeItem("token"),sessionStorage.removeItem("role")),sessionStorage.removeItem("draftRegistration");const i=localStorage.getItem("pendingCountry"),t=localStorage.getItem("pendingCurrency");if(i||t){try{await l.A.patch("/auth/me",{country:i,currency:t})}catch(r){console.error(r)}i&&localStorage.removeItem("pendingCountry"),t&&localStorage.removeItem("pendingCurrency")}e("/dashboard")},disabled:!(A||B),children:"Continue to the Site"})]})]}):(0,t.jsxs)("div",{className:"container py-5",children:[(0,t.jsx)("h3",{children:"No verification info found."}),(0,t.jsx)(s.N_,{to:"/login",className:"btn btn-primary mt-3",children:"Go to Login"})]})}},7896:(a,e,n)=>{n.d(e,{H:()=>t});const i={Afghanistan:"AFN",Albania:"ALL",Algeria:"DZD",Andorra:"EUR",Angola:"AOA","Antigua and Barbuda":"XCD",Argentina:"ARS",Armenia:"AMD",Australia:"AUD",Austria:"EUR",Azerbaijan:"AZN",Bahamas:"BSD",Bahrain:"BHD",Bangladesh:"BDT",Barbados:"BBD",Belarus:"BYN",Belgium:"EUR",Belize:"BZD",Benin:"XOF",Bhutan:"BTN",Bolivia:"BOB","Bosnia and Herzegovina":"BAM",Botswana:"BWP",Brazil:"BRL",Brunei:"BND",Bulgaria:"BGN","Burkina Faso":"XOF",Burundi:"BIF","Cabo Verde":"CVE",Cambodia:"KHR",Cameroon:"XAF",Canada:"CAD","Central African Republic":"XAF",Chad:"XAF",Chile:"CLP",China:"CNY",Colombia:"COP",Comoros:"KMF",Congo:"XAF","Costa Rica":"CRC","C\xf4te d'Ivoire":"XOF",Croatia:"EUR",Cuba:"CUP",Cyprus:"EUR","Czech Republic":"CZK","Democratic Republic of the Congo":"CDF",Denmark:"DKK",Djibouti:"DJF",Dominica:"XCD","Dominican Republic":"DOP",Ecuador:"USD",Egypt:"EGP","El Salvador":"USD","Equatorial Guinea":"XAF",Eritrea:"ERN",Estonia:"EUR",Eswatini:"SZL",Ethiopia:"ETB",Fiji:"FJD",Finland:"EUR",France:"EUR",Gabon:"XAF",Gambia:"GMD",Georgia:"GEL",Germany:"EUR",Ghana:"GHS",Greece:"EUR",Grenada:"XCD",Guatemala:"GTQ",Guinea:"GNF","Guinea-Bissau":"XOF",Guyana:"GYD",Haiti:"HTG","Holy See":"EUR",Honduras:"HNL",Hungary:"HUF",Iceland:"ISK",India:"INR",Indonesia:"IDR",Iran:"IRR",Iraq:"IQD",Ireland:"EUR",Israel:"ILS",Italy:"EUR",Jamaica:"JMD",Japan:"JPY",Jordan:"JOD",Kazakhstan:"KZT",Kenya:"KES",Kiribati:"AUD",Kuwait:"KWD",Kyrgyzstan:"KGS",Laos:"LAK",Latvia:"EUR",Lebanon:"LBP",Lesotho:"LSL",Liberia:"LRD",Libya:"LYD",Liechtenstein:"CHF",Lithuania:"EUR",Luxembourg:"EUR",Madagascar:"MGA",Malawi:"MWK",Malaysia:"MYR",Maldives:"MVR",Mali:"XOF",Malta:"EUR","Marshall Islands":"USD",Mauritania:"MRU",Mauritius:"MUR",Mexico:"MXN",Micronesia:"USD",Moldova:"MDL",Monaco:"EUR",Mongolia:"MNT",Montenegro:"EUR",Morocco:"MAD",Mozambique:"MZN",Myanmar:"MMK",Namibia:"NAD",Nauru:"AUD",Nepal:"NPR",Netherlands:"EUR","New Zealand":"NZD",Nicaragua:"NIO",Niger:"XOF",Nigeria:"NGN","North Korea":"KPW","North Macedonia":"MKD",Norway:"NOK",Oman:"OMR",Pakistan:"PKR",Palau:"USD",Palestine:"ILS",Panama:"PAB","Papua New Guinea":"PGK",Paraguay:"PYG",Peru:"PEN",Philippines:"PHP",Poland:"PLN",Portugal:"EUR",Qatar:"QAR",Romania:"RON",Russia:"RUB",Rwanda:"RWF","Saint Kitts and Nevis":"XCD","Saint Lucia":"XCD","Saint Vincent and the Grenadines":"XCD",Samoa:"WST","San Marino":"EUR","Sao Tome and Principe":"STN","Saudi Arabia":"SAR",Senegal:"XOF",Serbia:"RSD",Seychelles:"SCR","Sierra Leone":"SLL",Singapore:"SGD",Slovakia:"EUR",Slovenia:"EUR","Solomon Islands":"SBD",Somalia:"SOS","South Africa":"ZAR","South Korea":"KRW","South Sudan":"SSP",Spain:"EUR","Sri Lanka":"LKR",Sudan:"SDG",Suriname:"SRD",Sweden:"SEK",Switzerland:"CHF",Syria:"SYP",Tajikistan:"TJS",Tanzania:"TZS",Thailand:"THB","Timor-Leste":"USD",Togo:"XOF",Tonga:"TOP","Trinidad and Tobago":"TTD",Tunisia:"TND",Turkey:"TRY",Turkmenistan:"TMT",Tuvalu:"AUD",Uganda:"UGX",Ukraine:"UAH","United Arab Emirates":"AED","United Kingdom":"GBP","United States":"USD",Uruguay:"UYU",Uzbekistan:"UZS",Vanuatu:"VUV",Venezuela:"VES",Vietnam:"VND",Yemen:"YER",Zambia:"ZMW",Zimbabwe:"ZWL"},t=a=>i[a]},8971:(a,e,n)=>{n.d(e,{X:()=>i,q:()=>t});const i=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","C\xf4te d'Ivoire","Croatia","Cuba","Cyprus","Czech Republic","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Holy See","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],t=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","FOK","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KID","KMF","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STN","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TVD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VES","VND","VUV","WST","XAF","XCD","XOF","XPF","YER","ZAR","ZMW","ZWL"]}}]);
//# sourceMappingURL=861.3fb32041.chunk.js.map